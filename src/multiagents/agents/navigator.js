// This is the logic for the Agent Mode